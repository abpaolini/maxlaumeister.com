<!DOCTYPE html>
<html>
	{% include head.html %}

	<body>
		<div id="codeFixed">
		
		</div>
		        <div id="pageContent">
		        {% include header.html %}
		        {% include page_content.html %}
		        {% include contact.html %}
		        {% include footer.html %}
		        </div>
		    <div id="extraScroll">
		        <img id="downArrow" src="images/downarrow.svg">
		        <div id="presentText">
	                <div id="presentTextInner">
	                    <h1>Your Project is Next.</h1>
	                    <p>Together we can build something great.<br>Let's get in touch: <a href="mailto:maxlaumeister@gmail.com">max.laumeister@gmail.com</a>
	                </div>
	            </div>
	            <div id="iframeWrapper">
	                
	                <div id="iframeInner">
	                    <div id="browserDecoration">
	                        <div id="bbuttons">
	                            <div class="bbutton bbutton1">
	                            </div>
	                            <div class="bbutton bbutton2">
	                            </div>
	                            <div class="bbutton bbutton3">
	                            </div>
	                        </div>
	                    </div>
	                    <div id="browserURL">
	                        <div>
	                            <div id="browserForwardBack">
	                                <img id="browserBack" src="images/backbutton.svg"><img id="browserForward" src="images/backbutton.svg">
	                            </div>
	                            <div id="browserURLinputcell">
	                                <input id="browserURLinput" type="text" readonly="readonly">
	                            </div>
	                        </div>
	                    </div>
	                </div>
		        </div>
		<script>
		    var pageWrapperEl = document.getElementById("pageWrapper");
		    var pageContentEl = document.getElementById("pageContent");
		    var presentTextEl = document.getElementById("presentText");
		    var iframeWrapperEl = document.getElementById("iframeWrapper");
		    var iframeInnerEl = document.getElementById("iframeInner");
		    var browserURLinput = document.getElementById("browserURLinput");
		    var downArrowEl = document.getElementById("downArrow");
		    var extraScrollEl = document.getElementById("extraScroll");
		    var fixedBackground = document.getElementById("codeFixed");
		    var ciframe;
		    
	        var navEl = document.getElementsByClassName("navbar")[0];
	        
	        var navIsHidden = false;
	        var backgroundIsHidden = true;
	        var iframeRequested = false;
	        var iframeLoaded = false;
	        
	        var pageHeight;
	        var windowHeight;
	        
	        function resize() {
	            pageHeight = pageContentEl.offsetHeight;
	            windowHeight = window.innerHeight;
	        }
	         window.addEventListener("resize", resize, false);
	         resize();
	         
	         var hidingTimeout;
	        
	        function scrollChange() {
	            var scrollBottom = windowHeight + window.scrollY;
	            
	            if (scrollBottom >= pageHeight && backgroundIsHidden) {
	                fixedBackground.style.visibility = "visible";
	                backgroundIsHidden = false;
	            } else if (scrollBottom < pageHeight && !backgroundIsHidden) {
	                fixedBackground.style.visibility = "hidden";
	                backgroundIsHidden = true;
	            }
	            
	            if (window.scrollY >= pageHeight && !navIsHidden) {
	                clearTimeout(hidingTimeout);
	                function checkiframeReadyState() {
	                    if (!iframeLoaded) {
	                        requestAnimationFrame(checkiframeReadyState);
	                        return;
	                    }
	                    iframeWrapperEl.style.visibility = "visible";
	                    navEl.classList.add("tucked");
	                    iframeWrapperEl.classList.add("presenting");
	                    iframeInnerEl.classList.add("presenting");
	                    presentTextEl.classList.add("presenting");
	                    downArrowEl.classList.add("presenting");
	                }
	                requestAnimationFrame(checkiframeReadyState);
	                navIsHidden = true;
	            } else if (window.scrollY < pageHeight && navIsHidden) {
	                navEl.classList.remove("tucked");
	                iframeWrapperEl.classList.remove("presenting");
	                iframeInnerEl.classList.remove("presenting");
	                presentTextEl.classList.remove("presenting");
	                downArrowEl.classList.remove("presenting");
	                hidingTimeout = window.setTimeout(function() {
	                    iframeWrapperEl.style.visibility = "hidden";
	                }, 1000);
	                navIsHidden = false;
	            }
	            
	            if (window.scrollY >= pageHeight && !iframeRequested) {
	                ciframe = document.createElement("iframe");
	                ciframe.className = "recursiveFrame";
	                ciframe.frameBorder = "0";
	                ciframe.src = "index.html";
	                ciframe.onload = function() {
	                    iframeLoaded = true;
	                };
	                iframeInnerEl.appendChild(ciframe);
	                browserURLinput.value = window.location;
	                iframeRequested = true;
	            }
	        }
	        
	        window.onscroll = scrollChange;
	        scrollChange();
	        
		</script>
		{% include js.html %}
	</body>
</html>
